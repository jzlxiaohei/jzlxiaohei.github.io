!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.FCharts=e():t.FCharts=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(15),a=r(i),o=n(2),s=r(o),u=n(6),l=r(u),c=n(13),f=r(c),h={Chart:a.default,Constant:s.default,DefaultStyle:l.default,ChartCreator:f.default};e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),a=r(i),o=n(35),s=r(o),u=Object.prototype.toString,l={};l.Type={isArray:function(t){return"[object Array]"==u.call(t)},isFunction:function(t){return"[object Function]"==u.call(t)}},l.String={capitalizeFirstLetter:function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},l.Common={merge:function(t,e,n){for(var r in e)r in t?n&&(t[r]=e[r]):t[r]=e[r];return t},makeKvObj:function(t){for(var e={},n=0;n<t.length;n++){var r=t[n];e[r[0]]=r[1]}return e},invertKv:function(t){var e={};for(var n in t)e[t[n]]=n;return e},generateGetterSetter:function(t,e){for(var n in e){var r=l.String.capitalizeFirstLetter(n),i=e[n];!function(e,n){t[e]=n,t["get"+e]=function(){return t[e]},t["set"+e]=function(n){return t[e]=n,t}}(r,i)}}},l.Array={push:function(t,e){if(l.isArray(e))for(var n=0;n<e.length;n++)t.push(e[n]);else t.push(e)},unshift:function(t,e){if(l.isArray(e))for(var n=0;n<e.length;n++)t.unshift(e[n]);else t.unshift(e)}},l.Math={LineScale:function(t,e){return new a.default({domain:t,range:e})},TimeScale:function(t,e){return new s.default({domain:t,range:e})},integerDivide:function(t,e){return{div:Math.floor(t/e),rem:t%e}}},l.Canvas={fillTextCenter:function(t,e,n,r){var i=t.measureText(this.textFormat).width;return t.fillText(e,n-i/2,r),i},wrapText:function(t,e,n,r,i,a){for(var o=e.split("\n"),s=0;s<o.length;s++){for(var u="",l=o[s].split(" "),c=0;c<l.length;c++){var f=u+l[c]+" ",h=t.measureText(f),d=h.width;d>i?(t.fillText(u,n,r),u=l[c]+" ",r+=a):u=f}t.fillText(u,n,r),r+=a}},getMousePos:function(t,e){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}},l.Fn={noop:function(){},identify:function(t){return t}};var c=function(t,e){return e<t?-1:e>t?1:0};l.Algorithms={binarySearch:function(t,e,n){n=n||c;for(var r,i,a=0,o=t.length-1;a<=o;){r=Math.floor((a+o)/2),i=t[r];var s=n(e,i);if(s<0)a=r+1;else{if(!(s>0))return r;o=r-1}}return-1}},e.default=l,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={Painter:{LINE:"line",CANDLE:"candle",AREA:"area",X_GRID:"xGrid",Y_GRID:"yGrid",X_GRID_FIXED:"xGridFixed",BAR:"bar"},YBridge:{OHLC:"ohlc"},XBridge:{FIXED_COUNT:"fixedCount",ITEM_WIDTH:"itemWidth"},Component:{LINE:"line",CANDLE:"candle",AREA:"area",BAR:"bar",AVG_LINE:"avgLine",AVG_PRICE:"avgPrice"},YAxisType:{NORMAL:"normal",SYMMETRY:"symmetry"}};e.default=n,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(29),a=r(i),o=n(27),s=r(o),u=n(30),l=r(u),c=n(31),f=r(c),h=n(33),d=r(h),v=n(28),p=r(v),y=n(32),g=r(y),b=n(2),x=r(b),m=n(1),_=r(m),w=[[x.default.Painter.LINE,l.default],[x.default.Painter.CANDLE,a.default],[x.default.Painter.AREA,s.default],[x.default.Painter.X_GRID,f.default],[x.default.Painter.Y_GRID,d.default],[x.default.Painter.BAR,p.default],[x.default.Painter.X_GRID_FIXED,g.default]],O=_.default.Common.makeKvObj(w),k=function(t,e){return new O[t](e)};e.default=k,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(1),s=r(o),u=function(){function t(e){i(this,t),this.xRange=e.xRange,this.yRange=e.yRange,this.yAxis=e.yAxis||[],this.xAxis=e.xAxis||[],this.style=e.style||{},this.ctx=e.ctx}return a(t,[{key:"setCtx",value:function(t){return this.ctx=t,this}},{key:"setYRange",value:function(t){return this.yRange=t,this}},{key:"setXRange",value:function(t){return this.xRange=t,this}},{key:"setStyle",value:function(t){return s.default.Common.merge(this.style,t,!0),this}},{key:"setXAxis",value:function(t){return this.xAxis=t,this}},{key:"setYAxis",value:function(t){return this.yAxis=t,this}},{key:"__beforeCheck",value:function(){this.xAxis.length<this.yAxis.length&&console.error("xAxis.length should bigger than yAxis.length")}},{key:"beforeDraw",value:function(){this.ctx.save(),this.ctx.beginPath()}},{key:"draw",value:function(){console.error("subClass should implements draw method")}},{key:"render",value:function(){this.beforeDraw(),this.draw(),this.afterDraw()}},{key:"afterDraw",value:function(){var t=this.ctx,e=this.style;t.strokeStyle=e.strokeStyle||e.color,t.fillStyle=e.fillStyle||e.color,t.lineWidth=e.lineWidth||1,e.brushType=e.brushType||"stroke","both"==e.brushType?(t.stroke(),t.fill()):"fill"==e.brushType?t.fill():t.stroke(),t.restore()}}]),t}();e.default=u,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(3),s=r(o),u=n(2),l=r(u),c=n(1),f=r(c),h=n(6),d=r(h),v=n(8),p=r(v),y=function(t){return""},g=function(){function t(e){i(this,t),this.chart=e.chart,this.style=e.style||{},this.range=f.default.Common.merge(this.style,d.default),this.xBridge=e.xBridge,this.yBridge=e.yBridge||(0,p.default)(e.bridgeType?e.bridgeType:l.default.YBridge.OHLC,{range:e.range,data:e.data,tickCount:e.tickCount,niceTick:e.niceTick,axisType:e.axisType,dataMin:e.dataMin,dataMax:e.dataMax}),this.xTextFormat=e.xTextFormat||y,this.labels=e.labels||[],this.xTickList=e.xTickList,this.gridWidth=this.style.gridWidth,this.gridColor=this.style.gridColor,this.tickLabelColor=this.style.tickLabelColor,this.xGridOn=e.xGridOn||!1,this.yGridOn=e.yGridOn||!1,this.setXGridOn(this.xGridOn),this.setYGridOn(this.yGridOn)}return a(t,[{key:"setRange",value:function(t){this.yBridge.setRange(t)}},{key:"setData",value:function(t){this.yBridge.setData(t)}},{key:"addFirst",value:function(t){this.yBridge.addFirst(t)}},{key:"setYBridge",value:function(t){return this.yBridge=t,this}},{key:"setXBridge",value:function(t){return this.xBridge=t,this}},{key:"setXGridOn",value:function(t){return this.xGridOn=t,this.xGridOn&&!this.xGridPainter&&(this.xTickList?this.xGridPainter=(0,s.default)(l.default.Painter.X_GRID_FIXED,{tickCount:this.xTickList}):this.xGridPainter=(0,s.default)(l.default.Painter.X_GRID)),this}},{key:"setYGridOn",value:function(t){return this.yGridOn=t,this.yGridOn&&!this.yGridPainter&&(this.yGridPainter=(0,s.default)(l.default.Painter.Y_GRID)),this}},{key:"beforeDraw",value:function(){this.yBridge.setViewDomain(this.xBridge.getViewDomain()),this.ctx=this.chart.ctx}},{key:"afterDraw",value:function(){this.drawGrid()}},{key:"draw",value:function(){console.error("subClass of DrawComponentBase should implements draw method :"+this.constructor.toString())}},{key:"render",value:function(){this.beforeDraw(),this.draw(),this.afterDraw()}},{key:"drawGrid",value:function(){var t=this,e=this.yBridge.getRange(),n=this.xBridge.getRange();if(this.yGridOn){var r=this.yBridge.getTicks();this.yGridPainter.setCtx(this.ctx).setYAxis(r).setXRange(n).setYRange(e).setStyle({strokeStyle:this.gridColor,lineWidth:this.gridWidth,tickLabelColor:this.tickLabelColor}).setLabels(this.labels).render()}if(this.xGridOn)if(this.xTickList)this.xTickList.y0=e[0],this.xTickList.y1=e[1],this.xGridPainter.setCtx(this.ctx).setStyle({strokeStyle:this.gridColor,lineWidth:this.gridWidth,tickLabelColor:this.tickLabelColor}).setTickList(this.xTickList).render();else{var i=this.xBridge.getTicks();this.xGridPainter.setCtx(this.ctx).setXAxis(i).setXRange(n).setYRange(e).setStyle({strokeStyle:this.gridColor,lineWidth:this.gridWidth,tickLabelColor:this.tickLabelColor}).setTextArray(i.map(function(e){return t.xTextFormat(e.domainValue)})).render()}}},{key:"getYBridge",value:function(){return this.yBridge}}]),t}();e.default=g,t.exports=e.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n="#f85c5c",r="#50c88c",i={canvasColor:"#FFFFFF",candleUp:{fillStyle:n,brushType:"both",strokeStyle:"#f85c5c"},candleDown:{strokeStyle:r,brushType:"stroke"},line:{brushType:"stroke",lineWidth:1,strokeStyle:"#666"},avgLine_5:{brushType:"stroke",lineWidth:1,strokeStyle:"yellow"},avgLine_10:{brushType:"stroke",lineWidth:1,strokeStyle:"blue"},avgLine_20:{brushType:"stroke",lineWidth:1,strokeStyle:"white"},barUp:{fillStyle:n,brushType:"fill"},barDown:{strokeStyle:r,brushType:"stroke"},gridColor:"#666",tickLabelColor:"#a9a9a9",crossColor:"#999999",tipColor:"#f1f1f1",gridWidth:1};e.default=i,t.exports=e.default},function(t,e){"use strict";function n(t,e){var r=Array.isArray(e),i=r&&[]||{};return r?(t=t||[],i=i.concat(t),e.forEach(function(e,r){"undefined"==typeof i[r]?i[r]=e:"object"==typeof e?i[r]=n(t[r],e):t.indexOf(e)===-1&&i.push(e)})):(t&&"object"==typeof t&&Object.keys(t).forEach(function(e){i[e]=t[e]}),Object.keys(e).forEach(function(r){"object"==typeof e[r]&&e[r]&&t[r]?i[r]=n(t[r],e[r]):i[r]=e[r]})),i}Object.defineProperty(e,"__esModule",{value:!0});var r={deepmerge:n,dateStr2Obj:function(t){t+="";var e=+t.substring(0,4),n=+t.substring(4,6),r=+t.substring(6,8),i=+t.substring(8,10),a=+t.substring(10,12);return new Date(e,n-1,r,i,a)},keyValueInvert:function(t){var e={};for(var n in t)e[t[n]]=n;return e},createDom:function(t,e){var n=document.getElementById(t);if(!n)throw new Error("cannot get dom by id "+t+"  must be set in options");var r=e.width||n.offsetWidth,i=e.height||.618*r,a=t+"-canvas",o=t+"-event-canvas",s='\n        <canvas id="'+a+'" width="'+r+'" height="'+i+'" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>\n        <canvas id="'+o+'" width="'+r+'" height="'+i+'" style="position: absolute; left: 0; top: 0; z-index: 0;"></canvas>\n        ';return n.innerHTML=s,n.style.height=i+"px",{canvasHeight:i,canvasWidth:r,canvasId:a,canvasEventId:o}}};e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),a=n(2),o=r(a),s=n(1),u=r(s),l=[[o.default.YBridge.OHLC,i.YDataBridge]],c=u.default.Common.makeKvObj(l),f=function(t,e){return new c[t](e)};e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){var n,r=Math.floor(Math.log(t)/Math.LN10),i=t/Math.pow(10,r);return n=e?i<1.5?1:i<3?2:i<7?5:10:i<=1?1:i<=2?2:i<=5?5:10,n*Math.pow(10,r)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(1),l=(r(u),function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.domain=e.domain||[0,1],this.range=e.range||[0,1]}return s(t,[{key:"setRange",value:function(t){return this.range=t,this}},{key:"setDomain",value:function(t){return this.domain=t,this}},{key:"linear",value:function(t,e,n){var r=(n-t[0])/(t[1]-t[0]);return e[0]*(1-r)+e[1]*r}},{key:"scale",value:function(t){return this.linear(this.domain,this.range,t)}},{key:"invert",value:function(t){return this.linear(this.range,this.domain,t)}},{key:"ticks",value:function(){var t=arguments.length<=0||void 0===arguments[0]?10:arguments[0],e=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];return e?this._niceTick(t):this._avgTick(t)}},{key:"_avgTick",value:function(t){var e=(arguments.length<=1||void 0===arguments[1]||arguments[1],o(this.domain,2)),n=e[0],r=e[1];if(r<=n)return[];for(var i=(r-n)/(t-1),a=[],s=n;s<=r;s+=i)a.push(s);return a}},{key:"_niceTick",value:function(t){var e=o(this.domain,2),n=e[0],r=e[1];if(r<=n)return[];for(var i=t,s=a(r-n,!1),u=a(s/(i-1),!0),l=Math.floor(n/u)*u,c=Math.ceil(r/u)*u,f=l,h=c,d=u,v=[],p=f;p<h;p+=d)v.push(p);return v}}]),t}());e.default=l,t.exports=e.default},function(t,e,n){"use strict";var r=function(t,e,n,r,i,a,o,s){if(!t){var u;if(void 0===e)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,i,a,o,s],c=0;u=new Error(e.replace(/%s/g,function(){return l[c++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}};t.exports=r},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}function o(t,e){return e?e<6?a(t.Date())+"月"+a(t.getHours())+"时"+a(t.getMinutes())+"分":e<8?t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate()):t.getFullYear()+"":t.getFullYear()+"-"+a(t.getMonth()+1)+"-"+a(t.getDate())+":"+a(t.getHours())+"-"+a(t.getMinutes())}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(7),l=r(u),c=function(){function t(e,n,r){i(this,t),this.FCharts=e,this.HsDataFactoryList=n,this.domId=r.domId,this.hsReqData=r.hsReqData,this.canvasOptions=r.canvasOptions||{},this.chartOptions=r.chartOptions||{},this.hsCode=this.hsReqData.hsCode,this.beginDate="",this.noMoreData=!1,this.defaultDataCount=100,this.isFetching=!1,this._init()}return s(t,[{key:"_init",value:function(){var t=this;this.klineChart=this._createChart(),this._renderWithData(!0),this.klineChart.on("afterRender",function(e){if(!t.noMoreData){var n=e.xBridge.getXAxis(),r=e.xBridge.getRange();if(n.length>0){var i=n[0],a=r[0];i-a>50&&t._renderWithData()}}})}},{key:"_renderWithData",value:function(t){var e=this;if(!this.isFetching){this.isFetching=!0;var n=this.hsReqData;this.dataCount=n.data_count||this.defaultDataCount,this.HsDataFactoryList.kline({prod_code:n.hsCode,get_type:"offset",candle_period:n.candle_period,data_count:this.dataCount,date:this.beginDate}).onDataReady(function(n){e.isFetching=!1,e._processKlineData(n,t)}).init()}}},{key:"_processKlineData",value:function(t,e){var n=t.candle,r=l.default.keyValueInvert(n.fields),i=n[this.hsCode];i.length<this.dataCount&&(this.noMoreData=!0);for(var a=[],o=[],s=[],u=0;u<i.length;u++){var c=i[u];a.push({open:c[r.open_px],high:c[r.high_px],low:c[r.low_px],close:c[r.close_px]}),o.push(l.default.dateStr2Obj(c[r.min_time])),s.push(c[r.business_amount])}e?this.klineChart.setData({x:o,candle:a,bar:{data:s,candleData:a}}):this.klineChart.addFirst({x:o,candle:a,bar:{data:s,candleData:a}}),this.beginDate=i[0][r.min_time],this.klineChart.render()}},{key:"_createChart",value:function(){var t=this,e=this.FCharts,n=this.chartOptions,r=l.default.createDom(this.domId,this.canvasOptions),i=r.canvasHeight,a=r.canvasWidth,s=r.canvasId,u=r.canvasEventId,c={ctx:document.getElementById(s).getContext("2d"),drawCanvas:document.getElementById(s),eventCanvas:document.getElementById(u),xAxis:{range:[0,a],data:[],itemWidth:4,gap:2,tickCount:7},movable:!0,zoomable:!0,tips:function(t){var e=t.x,n=t.candle,r=t.bar;return"\n                    "+o(e)+"\n                    开 "+n.open+",收 "+n.close+"\n                    高 "+n.high+",低 "+n.low+"\n                    成交:"+r+"手\n                "},series:{candle:{range:[20,.6*i],type:"candle",data:[],yGridOn:!0,xGridOn:!0,tickCount:10,niceTick:!0,labels:[{pos:"left",top:2,place:"inner",value:function(t){return t.toFixed(2)}}],xTextFormat:function(e){return""+o(e,t.hsReqData.candle_period)}},avgLine5d:{range:[20,.6*i],parentSeries:"candle",data:[],type:"avgLine",avgLines:[5,10,20]},bar:{range:[.6*i+30,i],type:"bar",data:[],candleData:[],tickCount:3,labels:[{pos:"right",place:"inner",value:function(t){if(t>1e6){var e=Math.round(t/1e6);return e+"万手"}return Math.round(t/100)+"手"}}],yGridOn:!0,dataMin:0}}},f=l.default.deepmerge(c,n);return new e.Chart(f)}}]),t}();e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(7),s=r(o),u=s.default.dateStr2Obj,l=function(){function t(e,n,r){i(this,t),this.FCharts=e,this.HsDataFactoryList=n,this.domId=r.domId,this.hsReqData=r.hsReqData,this.canvasOptions=r.canvasOptions||{},this.chartOptions=r.chartOptions||{},this.hsCode=this.hsReqData.hsCode,this.onAfterRender=r.onAfterRender,this.trendChart=null,this._init()}return a(t,[{key:"_init",value:function(){this._renderWithData()}},{key:"_renderWithData",value:function(){var t=this,e=s.default.createDom(this.domId,this.canvasOptions),n=e.canvasHeight,r=e.canvasWidth,i=e.canvasId,a=e.canvasEventId,o=this.hsReqData.hsCode;if(!o)throw new Error("hsCode  must be set");var u=void 0,l=void 0;return this.HsDataFactoryList.real({fields:"preclose_px",en_prod_code:o}).onDataReady(function(e){for(var s=e.snapshot,c=s.fields,f=0,h=0;h<c.length;h++)if("preclose_px"==c[h]){f=h;break}var d=s[o][f];t.trendChart||(t.trendChart=t._createChart({canvasId:i,canvasEventId:a,canvasWidth:r,canvasHeight:n,preclose:d})),l=t.HsDataFactoryList.trend({prod_code:o,fields:"last_px,avg_px,business_amount"},{loop:!0}).onDataReady(function(e){t._drawReal(t.trendChart,e,o,d),"function"==typeof t.onAfterRender&&t.onAfterRender({hsClient:l,chart:u})}).init()}).init(),{hsClient:l,chart:u}}},{key:"_drawReal",value:function(t,e,n,r){for(var i=e.trend,a=i.fields,o={},s=0;s<a.length;s++)o[a[s]]=s;var l=i[n],c=[],f=[],h=[],d=[],v=[];l.forEach(function(t,e){c.push(u(t[o.min_time])),f.push((t[o.last_px]-r)/r);var n=e>0?l[e-1][o.business_amount]:0,i=e>0?l[e-1][o.last_px]:0;h.push(t[o.business_amount]-n),d.push((t[o.avg_px]-r)/r),v.push({open:i,close:t[o.last_px]})}),t.setData({x:c,"1m_bar":{data:h,candleData:v},"1m_line_real":f,"1m_line_avg":d}),t.render()}},{key:"_createChart",value:function(t){var e=t.canvasId,n=t.canvasEventId,r=t.canvasWidth,i=t.canvasHeight,a=t.preclose,o=this.chartOptions,u=this.FCharts,l={ctx:document.getElementById(e).getContext("2d"),drawCanvas:document.getElementById(e),eventCanvas:document.getElementById(n),xAxis:{fixedCount:241,range:[0,r],data:[]},tips:function(t){var e=t.x,n=t["1m_line_real"],r=t["1m_bar"];return"\n                时间:"+e.getHours()+":"+e.getMinutes()+"}\n\n                价格:"+n.last_px+"\n                成交量:"+r.business_amount+"手\n            "},series:{"1m_line_real":{axisType:"symmetry",data:[],range:[15,.6*i],type:"line",tickCount:5,gridColor:"#555",yGridOn:!0,xGridOn:!0,xTickList:{data:[{x:0,text:{text:"9点30分",textAlign:"left"}},{x:r/2,text:{text:"11点30分"}},{x:r,text:{text:"15点00分",textAlign:"right"}}]},style:{line:{brushType:"stroke",lineWidth:1,strokeStyle:"#0af"}},labels:[{pos:"left",top:2,place:"inner",value:function(t){return(t*a+a).toFixed(2)},style:function(t,e){return 0==t?{fillStyle:"#a9a9a9"}:t<0?{fillStyle:"#50c88c"}:{fillStyle:"#f85c5c"}}},{pos:"right",place:"inner",top:2,value:function(t){return(100*t).toFixed(2)+"%"},style:function(t){return 0==t?{fillStyle:"#a9a9a9"}:t<0?{fillStyle:"#50c88c"}:{fillStyle:"#f85c5c"}}}]},"1m_line_avg":{range:[20,.6*i],data:[],type:"avgPrice",parentSeries:"1m_line_real",style:{line:{brushType:"stroke",lineWidth:1,strokeStyle:"#A77C42"}}},"1m_bar":{range:[.6*i+30,i],data:[],candleData:[],type:"bar",tickCount:3,labels:[{pos:"right",place:"inner",value:function(t){if(t>1e6){var e=Math.round(t/1e6);return e+"万手"}return Math.round(t/100)+"手"}}],yGridOn:!0,dataMin:0}}},c=s.default.deepmerge(l,o);return new u.Chart(c)}}]),t}();e.default=l,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=n(12),o=r(a),s=n(11),u=r(s),l=function t(e,n){i(this,t),this.FCharts=e,this.HsDataFactoryList=n,this.TrendCreator=function(t){return new o.default(this.FCharts,this.HsDataFactoryList,t)},this.KLineCreator=function(t){return new u.default(this.FCharts,this.HsDataFactoryList,t)}};e.default=l,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){for(var r in k)k[r]&&(0,h.default)(r in t,n+" property "+r+" is required");for(var r in e)e[r]&&(0,h.default)(r in t,n+" property "+r+" is required")}function a(t){return i(t,P,"BarDrawComponent:"),(0,y.default)(b,t)}function o(t){return i(t,C,"CandleDrawComponent:"),(0,y.default)(_,t)}function s(t){return i(t,D,"LineDrawComponent:"),(0,y.default)(m,t)}function u(t){return i(t,A,"AvgPriceComponent:"),(0,y.default)(O,t)}function l(t){return i(t,T,"AvgLineComponent:"),(0,y.default)(w,t)}function c(t,e){switch(t){case b:return a(e);case _:return o(e);case m:return s(e);case x:throw new Error("not implement");case w:return l(e);case O:return u(e);default:throw new Error("type:"+t+" not supported")}}Object.defineProperty(e,"__esModule",{value:!0});var f=n(10),h=r(f),d=n(2),v=r(d),p=n(20),y=r(p),g=v.default.Component,b=g.BAR,x=g.AREA,m=g.LINE,_=g.CANDLE,w=g.AVG_LINE,O=g.AVG_PRICE,k={range:!0,data:!0,xBridge:!0,chart:!0,axisType:!1,yGridOn:!1,xGridOn:!1,tickCount:!1,labels:!1,niceTick:!1,style:!1,xTextFormat:!1,xTickList:!1},C={},D={},P={candleData:!0},A={parentSeries:!0},T={parentSeries:!0,avgLines:!0};e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(){var t=this,e=this.eventCanvas;this.movable&&(this._dragging=!1,this._lastX,this._curX,this.on("move",m.default.onMove),e.onmousedown=function(n){t._dragging=!0,t._lastX=P(e,n).x},e.onmouseup=function(){t._dragging=!1},e.onmousemove=function(n){var r=P(e,n).x,i=P(e,n).y;t.emit("move",{event:n,x:r,y:i,eventCanvas:e,__chart:t}),t._curX=r,t._dragging&&(t.setTranslation(r-(t._lastX?t._lastX:t._curX)),t.render()),t._lastX=t._curX}),this.zoomable&&(e.onwheel=function(n){var r=P(e,n).x,i=P(e,n).y,a=n.wheelDelta||-n.deltaY||-n.detail,o=a>0?1.1:1/1.1;t.emit("scale",{event:n,x:r,y:i,delta:a,eventCanvas:e,__chart:t}),t.setScale(o,r),t.render()})}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},l=n(36),c=r(l),f=n(10),h=r(f),d=n(3),v=(r(d),n(8)),p=(r(v),n(17)),y=r(p),g=n(14),b=r(g),x=n(16),m=r(x),_=n(2),w=r(_),O=n(1),k=r(O),C=n(6),D=r(C),P=k.default.Canvas.getMousePos,A=function(t){function e(t){i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.drawCanvas=t.drawCanvas,this.ctx=this.drawCanvas.getContext("2d"),this.seriesOptions=t.series||[],this.xAxisOptions=t.xAxis,this.eventCanvas=t.eventCanvas,this.movable=t.movable||!1,this.zoomable=t.zoomable||!1,this.useDefalutOnMove=t.useDefalutOnMove||!1,this.componentList={},this.avgLineComponentList={},this.avgPriceComponentList={},this.tips=t.tips,this.style=t.style||{},k.default.Common.merge(this.style,D.default),this.isInit=!1,this._buildXAxis()._buildSeries()._buildEvent()}return a(e,t),s(e,[{key:"_makeCanvasClear",value:function(){var t=this.ctx,e=window.devicePixelRatio||1,n=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,r=e/n;this._scaleRatio(this.drawCanvas,r)._scaleRatio(this.eventCanvas,r)}},{key:"_scaleRatio",value:function(t,e){if(e<2)return this;var n=t.width,r=t.height;t.width=n*e,t.height=r*e,t.style.width=n+"px",t.style.height=r+"px";var i=t.getContext("2d");return i.scale(e,e),i.translate(-.5,-.5),this}},{key:"init",value:function(){this.xBridge.init(),this.isInit=!0}},{key:"setData",value:function(t){(0,h.default)("x"in t,"param of chart.setData must be an Object and has property x");for(var e in t)"x"==e?this.xBridge.setData(t.x):e in this.componentList?this.componentList[e].setData(t[e]):this.avgPriceComponentList[e].setData(t[e]);for(var n in this.avgLineComponentList)this.avgLineComponentList[n].setData()}},{key:"addFirst",value:function(t){(0,h.default)("x"in t,"param of chart.setData must be an Object and has property x");for(var e in t)"x"==e?this.xBridge.addFirst(t.x):e in this.componentList?this.componentList[e].addFirst(t[e]):this.avgPriceComponentList[e].addFirst(t[e]);for(var e in this.avgLineComponentList)this.avgLineComponentList[e].addFirst()}},{key:"getComponent",value:function(t){return this.componentList[t]}},{key:"drawBox",value:function(){var t=30,e=20,n=470,r=this.drawCanvas.height-1;this.ctx.beginPath(),this.ctx.strokeStyle="#fff",this.ctx.rect(t,e,n,r),this.ctx.stroke()}},{key:"render",value:function(){this.isInit||this.init(),this.ctx.fillStyle=this.style.canvasColor,this.ctx.fillRect(0,0,this.drawCanvas.width,this.drawCanvas.height);for(var t in this.componentList)this.componentList[t].render();for(var t in this.avgPriceComponentList)this.avgPriceComponentList[t].render();for(var t in this.avgLineComponentList)this.avgLineComponentList[t].render();this.emit("afterRender",this)}},{key:"setScale",value:function(t,e){this.xBridge.setScale(t,e)}},{key:"setTranslation",value:function(t){this.xBridge.setTranslation(t)}},{key:"getInfoByX",value:function(t){var e=this.xBridge.getIndexByValue(t);if(e!=-1){var n={x:this.xBridge.getDataByIndex(e)};for(var r in this.componentList){var i=this.componentList[r].getYBridge();n[r]=i.getDataByIndex(e)}return n}}},{key:"_buildEvent",value:function(){return this.eventCanvas?void o.bind(this)():void console.warn("eventCanvas has not been set")}},{key:"_buildXAxis",value:function(){var t=this.xAxisOptions;return t.fixedCount?this.xBridge=(0,y.default)(w.default.XBridge.FIXED_COUNT,t):this.xBridge=(0,y.default)(w.default.XBridge.ITEM_WIDTH,t),this}},{key:"_buildSeries",value:function(){var t=this.seriesOptions;for(var e in t){var n=t[e];n.chart=this,this._addSeries(e,n)}return this}},{key:"_addSeries",value:function(t,e){var n=e.type;e.xBridge=this.xBridge,n===w.default.Component.AVG_LINE?this.avgLineComponentList[t]=(0,b.default)(n,e):n===w.default.Component.AVG_PRICE?this.avgPriceComponentList[t]=(0,b.default)(n,e):this.componentList[t]=(0,b.default)(n,e)}}]),e}(c.default);e.default=A,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e=t.__chart,n=t.eventCanvas,r=t.x,i=t.y,a=n.getContext("2d"),s=e.getInfoByX(r);if(a.clearRect(0,0,n.width,n.height),a.save(),a.beginPath(),a.strokeStyle=e.style.crossColor,a.fillStyle=e.style.tipColor,a.font="18px",a.moveTo(r,0),a.lineTo(r,n.height),a.stroke(),void 0!==s){var u=e.tips(s);if(u){a.save();var l=0;r>n.width/2&&(a.textAlign="end",l=-15),o.default.Canvas.wrapText(a,u,r+l,i,200,20),a.restore()}}}Object.defineProperty(e,"__esModule",{value:!0});var a=n(1),o=r(a);e.default={onMove:i},t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(18),a=n(2),o=r(a),s=n(1),u=r(s),l=[[o.default.XBridge.FIXED_COUNT,i.XDataBridgeWithFixedCount],[o.default.XBridge.ITEM_WIDTH,i.XDataBridgeWithItemWidth]],c=u.default.Common.makeKvObj(l),f=function(t,e){return new c[t](e)};e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=n(1),c=r(l),f=function(){function t(e){a(this,t),this._options=e,this.data=e.data||[],this.range=e.range,this.gap=e.gap||0,this.beginDate=e.beginDate,this.endDate=e.endDate,this.direction=e.direction||"end",this.scaleRange=e.scaleRange||[.01,5],this.scale=1,this.tickCount=e.tickCount||10}return u(t,[{key:"init",value:function(){var t=!0;this.initItemWidth(this._options),this._originItemWidth=this.itemWidth,this._buildInitAxis(t);
}},{key:"initItemWidth",value:function(t){throw new Error("subClass of XDataBridge should implement initItemWidth")}},{key:"addFirst",value:function(t){c.default.Type.isArray(t)||(t=[t]);for(var e=this.itemWidth+this.gap,n=this.xAxis[0],r=t.length,i=r-1;i>=0;i--)this.data.unshift(t[i]),this.xAxis.unshift(n-e*(r-i));return this._updateXAxis(function(t){return t}),this}},{key:"setData",value:function(t){this.data=t,this._buildInitAxis()}},{key:"getIndexByValue",value:function(t){var e=this.xAxis;if(!e||!e.length)return console.warn("xDataBridge.getIndexByValue: xAxis is empty"),-1;var n=this.itemWidth+this.gap;return c.default.Algorithms.binarySearch(e,t,function(t,e){return e>=t-n&&e<=t?0:e+n<t?-1:1})}},{key:"_updateXAxis",value:function(t){for(var e=this.xAxis,n=o(this.range,2),r=n[0],i=n[1],a=this.itemWidth+this.gap,s=void 0,u=void 0,l=0;l<e.length;l++)e[l]=t(e[l],l),void 0===s&&e[l]+a>=r&&(s=l),void 0===u&&e[l]>=i&&(u=l);s=void 0===s?0:s,u=void 0===u?e.length:u,this.viewDomain=[s,u]}},{key:"_buildInitAxis",value:function(t){var e=this.range,n=this.data,r=e[0],i=this.itemWidth+this.gap,a=0;t&&this.displayCount<n.length&&"end"==this.direction&&(a=(n.length-this.displayCount)*i),this.xAxis=new Array(this.data.length);var o=r-a;return this._updateXAxis(function(t,e){return i*e+o}),this}},{key:"getTicks",value:function(){for(var t=(this.itemWidth+this.gap)/2,e=o(this.viewDomain,2),n=e[0],r=e[1],i=this.data,a=this.beginDate||i[n],s=this.endDate||i[r-1],u=this.xAxis,l=c.default.Math.TimeScale([a,s],[u[0],u[u.length-1]]),f=this.scale>1?this.scale:1,h=l.ticks(Math.round(this.tickCount*f)),d=[],v=0;v<h.length;v++){var p=h[v],y=c.default.Algorithms.binarySearch(this.data,p);if(y!=-1){var g=this.xAxis[y]+t;g>this.range[1]||g<this.range[0]||d.push({domainValue:this.data[y],rangeValue:g,index:y})}}return d}},{key:"getItemWidth",value:function(){return this.itemWidth}},{key:"getGap",value:function(){return this.gap}},{key:"getData",value:function(){return this.data}},{key:"getViewData",value:function(){var t=o(this.viewDomain,2),e=t[0],n=t[1];return this.data.slice(e,n)}},{key:"getViewDomain",value:function(){return this.viewDomain}},{key:"getRange",value:function(){return this.range}},{key:"getXAxis",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0];if("all"===t)return this.xAxis;var e=o(this.viewDomain,2),n=e[0],r=e[1];return this.xAxis.slice(n,r)}},{key:"getDataByIndex",value:function(t){return this.data[t]}},{key:"setScale",value:function(t,e){var n=this.scale*t;if(n>this.scaleRange[1]||n<this.scaleRange[0])return this;this.scale=n;var r=this.xAxis,i=r.length,a=r[i-1],o=r[0],s=this.itemWidth,u=-1;u=e>=a?Math.round(e-a)/s:e<=o?Math.round(e-o)/s:this.getIndexByValue(e),this.itemWidth=this._originItemWidth*this.scale;var l=this.itemWidth,c=l-s;return this._updateXAxis(function(t,e){return t+c*(e-u)}),this}},{key:"setTranslation",value:function(t){return this._updateXAxis(function(e,n){return e+t}),this}}]),t}(),h=function(t){function e(t){if(a(this,e),!("itemWidth"in t))throw new Error("need itemWidth");s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return i(e,t),u(e,[{key:"initItemWidth",value:function(t){var e=this.gap,n=this.range,r=t.itemWidth;if(n[0]>=n[1])throw new Error("区间(Range)开始数值，应小于结束数值");var i=n[1]-n[0],a=c.default.Math.integerDivide(i+e,r+e),o=a.div;this.displayCount=o;var s=a.rem;r+=s/o,this.itemWidth=r}}]),e}(f);e.XDataBridgeWithItemWidth=h;var d=function(t){function e(t){if(a(this,e),!("fixedCount"in t))throw new Error("need fixedCount");s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return i(e,t),u(e,[{key:"initItemWidth",value:function(t){this.displayCount=this.fixedCount=t.fixedCount;var e=this.gap,n=this.range,r=n[1]-n[0],i=r/this.fixedCount;if(i<e)throw new Error("gap too big，itemWidth will be zero or negative");this.itemWidth=i-e}}]),e}(f);e.XDataBridgeWithFixedCount=d},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(1),u=r(s),l=n(2),c=r(l),f=function(){function t(e){i(this,t),this.axisType=e.axisType||"default",this.data=e.data||[],this.range=e.range,this.viewDomain=e.viewDomain||[0,this.data.length],this.yAxis=new Array(this.data.length),this.tickCount=e.tickCount,this.niceTick=e.niceTick||!1,this.dataMin=e.dataMin,this.dataMax=e.dataMax,this.linearScale=u.default.Math.LineScale()}return o(t,[{key:"init",value:function(){this.buildAxis()}},{key:"addFirst",value:function(t){u.default.Type.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--)this.data.unshift(t[e]);return this.buildAxis(),this}},{key:"setData",value:function(t){this.data=t,this.buildAxis()}},{key:"_calcMaxMin",value:function(){var t=a(this.viewDomain,2),e=t[0],n=t[1],r=-(1/0),i=1/0,o=this.data;if("object"==typeof o[0])for(var s=e;s<n;s++){var u=o[s],l=u.high,f=u.low;l>r&&(r=l),f<i&&(i=f)}else for(var s=e;s<n;s++){var h=o[s];h>r&&(r=h),h<i&&(i=h)}if(void 0!==this.dataMax&&(r=this.dataMax),void 0!==this.dataMin&&(i=this.dataMin),this.axisType===c.default.YAxisType.SYMMETRY){var d=Math.max(Math.abs(i),Math.abs(r));i=-d,r=d}this.domain=[i,r],this.linearScale.setDomain(this.domain).setRange(this.range)}},{key:"buildAxis",value:function(){this._calcMaxMin();var t=this.data,e=a(this.viewDomain,2),n=e[0],r=e[1];return this.yAxis=this.interpolation(t.slice(n,r)),this}},{key:"interpolation",value:function(t){var e=this.range[1]+this.range[0],n=this.linearScale;return t.map(function(t){if("object"==typeof t){var r={};for(var i in t)r[i]=e-n.scale(t[i]);return r}return e-n.scale(t)})}},{key:"setRange",value:function(){this.range=range}},{key:"setViewDomain",value:function(t,e){return void 0===e&&(e=!0),this.viewDomain=t,e&&this.buildAxis(),this}},{key:"getYAxis",value:function(){return this.yAxis}},{key:"getTicks",value:function(){for(var t=this.linearScale.ticks(this.tickCount,this.niceTick),e=this.range[1]+this.range[0],n=[],r=0;r<t.length;r++){var i=t[r],a=e-this.linearScale.scale(i);a>this.range[1]||a<this.range[0]||n.push({domainValue:i,rangeValue:a})}return n}},{key:"getViewData",value:function(){var t=a(this.viewDomain,2),e=t[0],n=t[1];return this.data.slice(e,n)}},{key:"getData",value:function(){return this.data}},{key:"getDataByIndex",value:function(t){return this.data[t]}},{key:"getViewDomain",value:function(){return this.viewDomain}},{key:"getDomain",value:function(){return this.domain}},{key:"getRange",value:function(){return this.range}}]),t}();e.YDataBridge=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),a=r(i),o=n(1),s=r(o),u=n(25),l=r(u),c=n(26),f=r(c),h=n(21),d=(r(h),n(24)),v=r(d),p=n(23),y=r(p),g=n(22),b=r(g),x=[[a.default.Component.CANDLE,l.default],[a.default.Component.LINE,f.default],[a.default.Component.BAR,v.default],[a.default.Component.AVG_PRICE,y.default],[a.default.Component.AVG_LINE,b.default]],m=s.default.Common.makeKvObj(x),_=function(t,e){return new m[t](e)};e.default=_,t.exports=e.default},function(t,e){"use strict"},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},l=n(5),c=r(l),f=n(2),h=r(f),d=n(3),v=r(d),p=function(t){function e(t){i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t);var n=t.avgLines;this.linePainterList={},this.avgDataList={};for(var r=0;r<n.length;r++)this.linePainterList[n[r]]=(0,v.default)(h.default.Painter.LINE),this.avgDataList[n[r]]=[];this.parentSeries=t.parentSeries,this.isAvgInit=!1,this.yBridge=this.chart.getComponent(this.parentSeries).getYBridge()}return a(e,t),s(e,[{key:"setData",value:function(t){this._calcAvg()}},{key:"addFirst",value:function(t){this._calcAvg()}},{key:"beforeDraw",value:function(){this.ctx=this.chart.ctx}},{key:"_clear",value:function(){for(var t in this.avgDataList)this.avgDataList[t]=[]}},{key:"_calcAvg",value:function(){this._clear();for(var t=this.yBridge,e=t.getData(),n=0;n<e.length;n++)for(var r in this.avgDataList){var i=this._calcSingle(e,n,+r);this.avgDataList[r].push(i)}}},{key:"_calcSingle",value:function(t,e,n){if(!(e<n-1)){for(var r=0,i=0;i<n;i++){var a=t[e-i];r+=a.close||a}return r/n}}},{key:"_findIndexOfFirstNoUndefined",value:function(t,e,n){for(var r=e;r<n;r++)if(void 0!==t[r])return r;return n}},{key:"draw",value:function(){this.isAvgInit||(this._calcAvg(),this.isAvgInit=!0);var t=this.xBridge.getXAxis("all"),e=this.xBridge.getViewDomain(),n=o(e,2),r=n[0],i=n[1],a=this.xBridge.getGap(),s=this.xBridge.getItemWidth();for(var u in this.avgDataList){var l=this.linePainterList[u],c=this.avgDataList[u],f=this._findIndexOfFirstNoUndefined(c,r,i),h=this.yBridge.interpolation(c.slice(f,i));l.setCtx(this.ctx).setXAxis(t.slice(f,i)).setYAxis(h).setStyle(this.style["avgLine_"+u]).setStyle({itemWidth:s,gap:a}).render()}}}]),e}(c.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},l=n(5),c=r(l),f=n(2),h=r(f),d=n(3),v=r(d),p=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.linePainter=(0,v.default)(h.default.Painter.LINE),this.data=t.data,this.parentSeries=t.parentSeries}return a(e,t),s(e,[{key:"setData",value:function(t){this.data=t}},{key:"beforeDraw",value:function(){this.ctx=this.chart.ctx}},{key:"draw",value:function(){var t=this.xBridge.getXAxis(),e=this.xBridge.getGap(),n=this.xBridge.getItemWidth(),r=this.data,i=this.xBridge.getViewDomain(),a=o(i,2),s=a[0],u=a[1],l=this.chart.getComponent(this.parentSeries).getYBridge().interpolation(r.slice(s,u));this.linePainter.setCtx(this.ctx).setXAxis(t).setYAxis(l).setStyle(this.style.line).setStyle({gap:e,itemWidth:n}).render()}}]),e}(c.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){return t.close<t.open?"down":"up"}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},l=n(5),c=r(l),f=n(2),h=r(f),d=n(3),v=r(d),p=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.upBarPainter=(0,v.default)(h.default.Painter.BAR),this.downBarPainter=(0,v.default)(h.default.Painter.BAR),this.candleData=t.candleData||[],this.upDownSplitFn=t.upDownSplitFn||o}return a(e,t),s(e,[{key:"setData",value:function(t){this.data=t.data,this.candleData=t.candleData,u(Object.getPrototypeOf(e.prototype),"setData",this).call(this,this.data)}},{key:"addFirst",value:function(t){this.candleData=t.candleData.concat(this.candleData),this.data=t.data.concat(this.data),u(Object.getPrototypeOf(e.prototype),"addFirst",this).call(this,t.data)}},{key:"draw",value:function(){for(var t=this.yBridge.getYAxis(),e=this.xBridge.getXAxis(),n=this.xBridge.getItemWidth(),r=this.yBridge.getRange(),i=this.xBridge.getRange(),a=this.xBridge.getViewDomain(),o=this.candleData.slice(a[0],a[1]),s=[],u=[],l=[],c=[],f=0;f<o.length;f++){var h=o[f];"down"===this.upDownSplitFn(h)?(u.push(t[f]),c.push(e[f])):(s.push(t[f]),l.push(e[f]))}this.upBarPainter.setCtx(this.ctx).setYRange(r).setXRange(i).setXAxis(l).setYAxis(s).setStyle(this.style.barUp).setStyle({itemWidth:n}).render(),this.downBarPainter.setCtx(this.ctx).setYRange(r).setXRange(i).setXAxis(c).setYAxis(u).setStyle(this.style.barDown).setStyle({itemWidth:n}).render()}}]),e}(c.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},u=n(3),l=r(u),c=n(2),f=r(c),h=n(1),d=(r(h),n(5)),v=r(d),p=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.upCandlePainter=(0,l.default)(f.default.Painter.CANDLE),this.downCandlePaiter=(0,l.default)(f.default.Painter.CANDLE)}return a(e,t),o(e,[{key:"draw",value:function(){for(var t=this.yBridge.getYAxis(),e=this.xBridge.getXAxis(),n=this.yBridge.getRange(),r=this.xBridge.getRange(),i=this.yBridge.getViewData(),a=this.xBridge.getItemWidth(),o=this.xBridge.getGap(),s=[],u=[],l=[],c=[],f=0;f<i.length;f++){var h=i[f];h.close<h.open?(u.push(t[f]),c.push(e[f])):(s.push(t[f]),l.push(e[f]))}this.upCandlePainter.setCtx(this.ctx).setXAxis(l).setYAxis(s).setXRange(r).setYRange(n).setStyle(this.style.candleUp).setStyle({itemWidth:a,gap:o}).render(),this.downCandlePaiter.setCtx(this.ctx).setXAxis(c).setYAxis(u).setXRange(r).setYRange(n).setStyle(this.style.candleDown).setStyle({itemWidth:a,gap:o}).render()}}]),e}(v.default);e.default=p,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},u=n(5),l=r(u),c=n(2),f=r(c),h=n(3),d=r(h),v=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.pickedProp=t.pickedProp||"close",this.linePainter=(0,d.default)(f.default.Painter.LINE)}return a(e,t),o(e,[{key:"draw",value:function(){var t=this,e=this.yBridge.getYAxis(),n=this.xBridge.getXAxis(),r=this.xBridge.getGap(),i=this.xBridge.getItemWidth(),a=e[0];"object"==typeof a&&(e=e.map(function(e){return e[t.pickedProp]})),this.linePainter.setCtx(this.ctx).setXAxis(n).setYAxis(e).setStyle(this.style.line).setStyle({gap:r,itemWidth:i}).render()}}]),e}(l.default);e.default=v,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},u=n(4),l=r(u),c=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),o(e,[{key:"render",value:function(){this.beforeDraw();var t=this.xAxis,e=this.yAxis;if(0===t.length||0===e.length)throw new Error("xAxis and yAxis should not be empty");for(var n=Math.min(e.length,t.length),r=1;r<n;r++){var i=t[r],a=e[r];ctx.lineTo(i,a)}this.setStyle({brushType:"stroke"}),this.afterDraw(),ctx.lineTo(t[n-1],this.xRange[0]),ctx.lineTo(t[0],this.xRange[1]),this.setStyle({brushType:"fill"}),this.afterDraw()}}]),e}(l.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},u=n(4),l=r(u),c=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),o(e,[{key:"draw",value:function(){for(var t=this.ctx,e=this.xAxis,n=this.yAxis,r=this.style.itemWidth||6,i=this.yRange[1],a=0;a<n.length;a++){var o=n[a],s=e[a];t.moveTo(s,i),t.lineTo(s,o),t.lineTo(s+r,o),t.lineTo(s+r,i),t.closePath()}}}]),e}(l.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},u=n(4),l=r(u),c=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),o(e,[{key:"draw",value:function(){for(var t=this.ctx,e=this.xAxis,n=this.yAxis,r=this.style.itemWidth||6,i=this.style.gap||0,a=0;a<n.length;a++){var o=n[a],s=e[a],u=o.open,l=o.close,c=o.high,f=o.low;s+=i/2;var h=s+r,d=(s+h)/2;t.moveTo(s,u),t.lineTo(h,u),t.lineTo(h,l),t.lineTo(s,l),t.lineTo(s,u);var v,p;u>l?(v=l,p=u):(v=u,p=l),t.moveTo(d,v),t.lineTo(d,c),t.moveTo(d,p),t.lineTo(d,f)}}}]),e}(l.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},u=n(4),l=r(u),c=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return a(e,t),o(e,[{key:"draw",value:function(){var t=this.ctx,e=this.xAxis,n=this.yAxis,r=this.style.gap||0,i=this.style.itemWidth||6;0!==e.length&&0!==n.length||console.error("xAxis and yAxis should not be empty");var a=r/2+i/2,o=Math.min(n.length,e.length);t.moveTo(e[0]+a,n[0]);for(var s=1;s<o;s++){var u=n[s],l=e[s]+a;t.lineTo(l,u)}}},{key:"afterDraw",value:function(){var t=this.style;t.lineDash&&("function"==typeof ctx.setLineDash?ctx.setLineDash(t.lineDash):console.warn("setLineDash not support in your browser")),s(Object.getPrototypeOf(e.prototype),"afterDraw",this).call(this)}}]),e}(l.default);e.default=c,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},l=n(4),c=r(l),f=n(1),h=(r(f),function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.yRange=t.yRange,this.xAxis=t.xAxis,this.textArr=t.textArr}return a(e,t),s(e,[{key:"setTextArray",value:function(t){return this.textArr=t,this}},{key:"draw",value:function(){var t=this.ctx,e=o(this.yRange,2),n=e[0],r=e[1],i=this.textArr,a=-(1/0);t.save(),t.fillStyle=this.style.tickLabelColor;for(var s=0;s<this.xAxis.length;s++){var u=this.xAxis[s].rangeValue;if(t.moveTo(u,n),t.lineTo(u,r),i){var l=i[s],c=t.measureText(l).width;a<u-c/2&&(t.fillText(l,u-c/2,r+15),a=u+c/2)}}t.restore()}}]),e}(c.default));e.default=h,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},u=n(4),l=r(u),c=n(1),f=(r(c),function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),s(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.tickList=t.tickList}return a(e,t),o(e,[{key:"setTickList",value:function(t){return this.tickList=t,this}},{key:"draw",value:function(){var t=this.ctx;t.save(),t.fillStyle=this.style.tickLabelColor;for(var e=this.tickList.y0,n=this.tickList.y1,r=this.tickList.data,i=0;i<r.length;i++){var a=r[i],o=a.x,s=a.text,u=s.text,l=s.textAlign,c=s.yOffset;l=l||"middle",void 0===c&&(c=15),t.moveTo(o,e),t.lineTo(o,n);var f=0;if("right"==l){var h=t.measureText(u).width;f=-h}if("middle"==l){var h=t.measureText(u).width;f=-h/2}t.fillText(u,o+f,n+15)}t.restore()}}]),e}(l.default));e.default=f,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t;
}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function(t,e,n){for(var r=!0;r;){var i=t,a=e,o=n;r=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(i);if(null===l)return;t=l,e=a,n=o,r=!0,s=l=void 0}},l=n(4),c=r(l),f=n(1),h=r(f),d=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.xRange=t.xRange,this.labels=t.labels}return a(e,t),s(e,[{key:"setLabels",value:function(t){return this.labels=t,this}},{key:"setXRange",value:function(t){return this.xRange=t,this}},{key:"setTextArray",value:function(t){return this.textArr=t,this}},{key:"draw",value:function(){var t=this.ctx,e=o(this.xRange,2),n=e[0],r=e[1];t.save(),t.beginPath();for(var i=0;i<this.yAxis.length;i++){var a=this.yAxis[i].rangeValue;t.moveTo(n,a),t.lineTo(r,a)}this.drawText(),t.restore()}},{key:"drawText",value:function(){var t=this.ctx,e=this.yAxis.map(function(t){return t.rangeValue}),n=this.yAxis.map(function(t){return t.domainValue});t.save(),t.fillStyle=this.style.tickLabelColor;for(var r=0;r<this.labels.length;r++)this._drawSingle(e,n,this.labels[r]);t.restore()}},{key:"_drawSingle",value:function(t,e,n){var r=o(this.xRange,2),i=r[0],a=r[1],s=void 0,u=void 0,l=n.top||0;"left"==n.pos&&("inner"==n.place&&(u="start"),"outer"==n.place&&(u="end"),s=n.base||i),"right"==n.pos&&("inner"==n.place&&(u="end"),"outer"==n.place&&(u="start"),s=n.base||a);var c=n.value||h.default.Fn.identify,f=n.style,d=this.ctx;d.textAlign=u;for(var v=0;v<t.length;v++){var p=t[v];if(f){var y=f(e[v],t[v]);for(var g in y)d[g]=y[g]}else d.fillStyle=this.style.tickLabelColor;d.fillText(c(e[v]),s,p-l)}}}]),e}(c.default);e.default=d,t.exports=e.default},function(t,e){"use strict";function n(t,e,n){function r(e){var n=t(e),r=a(n,1);return e-n<r-e?n:r}function i(n){return e(n=t(new Date(n-1)),1),n}function a(t,n){return e(t=new Date(+t),n),t}function o(r,i,a){var o=t(r),s=[];if(a>1)for(;o<i;)n(o)%a||s.push(new Date(+o)),e(o,1);else for(;o<i;)s.push(new Date(+o)),e(o,1);return s}return t.floor=t,t.range=o,t.ceil=i,t.round=r,t.offset=a,t}Object.defineProperty(e,"__esModule",{value:!0});var r={};r.second=n(function(t){return new Date(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),r.minute=n(function(t){return new Date(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),r.hour=n(function(t){var e=t.getTimezoneOffset()/60;return new Date(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),r.day=n(function(t){var e=new Date(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),r.dayOfYear=function(t){var e=this.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},r.month=n(function(t){return t=r.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),r.year=n(function(t){return t=r.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()});[[6e4,r.minute,1],[3e5,r.minute,5],[9e5,r.minute,15],[18e5,r.minute,30],[36e5,r.hour,1],[108e5,r.hour,3],[216e5,r.hour,6],[432e5,r.hour,12],[864e5,r.day,1],[1728e5,r.day,2],[864e6,r.day,10],[2592e6,r.month,1],[7776e6,r.month,3],[15552e6,r.month,6],[31536e6,r.year,1]];e.default=r,t.exports=e.default},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(t){i=!0,a=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(34),u=r(s),l=n(9),c=(r(l),[[6e4,u.default.minute,1],[3e5,u.default.minute,5],[9e5,u.default.minute,15],[18e5,u.default.minute,30],[36e5,u.default.hour,1],[108e5,u.default.hour,3],[216e5,u.default.hour,6],[432e5,u.default.hour,12],[864e5,u.default.day,1],[1728e5,u.default.day,2],[864e6,u.default.day,10],[2592e6,u.default.month,1],[7776e6,u.default.month,3],[15552e6,u.default.month,6],[31536e6,u.default.year,1]]),f=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];i(this,t),this.domain=e.domain}return o(t,[{key:"setDomain",value:function(t){return this.domain=t,this}},{key:"ticks",value:function t(){for(var e,n,r=arguments.length<=0||void 0===arguments[0]?10:arguments[0],i=arguments.length<=1||void 0===arguments[1]||arguments[1],o=a(this.domain,2),s=o[0],u=o[1],l=u-s,f=c.length,h=f-1;h>=0;h--){var d=c[h],v=d[0];if(l/v>r){e=d[1],n=d[2];break}}e||(e=c[0][1],n=c[0][2]);var t=e.range(s,u,n);if(i&&t.length){var p=t.length;s.getTime()!=t[0].getTime()&&t.unshift(s),u.getTime()!=t[p-1].getTime()&&t.push(u)}return t}}]),t}();e.default=f,t.exports=e.default},function(t,e,n){var r;(function(){"use strict";function e(){}function i(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function a(t){return function(){return this[t].apply(this,arguments)}}var o=e.prototype,s=this,u=s.EventEmitter;o.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp){e={};for(n in r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n])}else e=r[t]||(r[t]=[]);return e},o.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},o.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},o.addListener=function(t,e){var n,r=this.getListenersAsObject(t),a="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&i(r[n],e)===-1&&r[n].push(a?e:{listener:e,once:!1});return this},o.on=a("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=a("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},o.removeListener=function(t,e){var n,r,a=this.getListenersAsObject(t);for(r in a)a.hasOwnProperty(r)&&(n=i(a[r],e),n!==-1&&a[r].splice(n,1));return this},o.off=a("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,n){var r,i,a=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)a.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},o.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},o.removeAllListeners=a("removeEvent"),o.emitEvent=function(t,e){var n,r,i,a,o,s=this.getListenersAsObject(t);for(a in s)if(s.hasOwnProperty(a))for(n=s[a].slice(0),i=n.length;i--;)r=n[i],r.once===!0&&this.removeListener(t,r.listener),o=r.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},o.trigger=a("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return s.EventEmitter=u,e},r=function(){return e}.call(s,n,s,t),!(void 0!==r&&(t.exports=r))}).call(this)}])});